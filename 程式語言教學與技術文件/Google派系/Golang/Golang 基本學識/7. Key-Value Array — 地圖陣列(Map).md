#程式語言教學與技術文件 #Google派系 #Golang #Golang基本學識
# Key-Value Array — 地圖陣列(Map)

Key-Value Array(鍵值型陣列) 算是非常廣泛應用的一種陣列，當解析Json檔案時，最常使用的就是這種陣列，一個鍵對應一個值，尤其在PHP上也非常常應用到，所以Golang也必須要有這個東西才行(當然，連Flutter的Dart都有了….)，這樣的陣列在這裡跟Dart一樣，都被稱為作為Map。

先簡單說明Key-Value為何廣泛應用在Json當中，因為Json的表示法根本就跟Key-Value一模一樣，來看個範例：

```json
{
		"Students":[
				{
						"Name":"王小明",
						"StudentNumber":"2202432",
						"Birthday":"1996-03-11 00:00:00",
						"Sex":"Man",
						"Effective":1
				},
				{
						"Name":"王大明",
						"StudentNumber":"2202433",
						"Birthday":"1995-10-12 00:00:00",
						"Sex":"Man",
						"Effective":0
				},
				{
						"Name":"陳小美",
						"StudentNumber":"2202405",
						"Birthday":"1996-07-20 00:00:00",
						"Sex":"Woman",
						"Effective":0
				}
		]
}
```

你會發現這樣的排法就是Key-Value的陣列，所以Json在使用這種變數非常方便，C#比較常用到的方式則是將Json解析成物件陣列，這種方式是物件導向程式針對Json解析的特殊方法，Golang這種與PHP一樣都是靜態非物件導向的程式語言則是使用這種方法，先來看看Golang怎麼使用的。

```go
func MapPractice(){
	x := make(map[string]int)
	//Golang中的Map一定要用make初始化，不然會crash
	x["key"] = 10
	x["value"] = 20
	fmt.Println(x)
}
```

Output：

```bash
map[key:10 value:20]
```

同場加映：C#如何解析Json

C#或Dart(物件導向)在解析Json時，會先在Postman那邊求一次API，了解Json的構造後，創建一個結構與Json相同的物件類別，最後解析就直接把值丟到類別內當作新物件，依照剛剛Student的構造來講解看看吧。

```csharp
using System;
using System.IO;//Stream Reader會用到
using Newtonsoft.Json;//C#專門拿來解析Json的套件，請用Nuget下載安裝
using System.Collections.Generic;//List<T>會用到

namespace dotnetcoreconsole
{
    class Program
    {
				//先建立跟Json一模一樣的類別們
        public class Student{
            public string Name{get;set;}
            public string StudentNumber{get;set;}
            public DateTime Birthday{get;set;}
            public string Sex{get;set;}
            public int Effective{get;set;}
        }

				//Class
        public class ClassRoom{
            public List<Student> Students{get;set;}
        }
				
				//讀取Json
        public static ClassRoom LoadJson(){
						//短暫使用並讀取，避免把檔案鎖死
            using(StreamReader r = new StreamReader("class.json")){
                string json = r.ReadToEnd();//讀取Json
								//解析Json
                ClassRoom classRoom = JsonConvert.DeserializeObject<ClassRoom>(json);
                return classRoom;//回傳解析後的ClassRomm類別
            }
        }
        static void Main(string[] args)
        {
						//讀取並解析
            ClassRoom Classroom = LoadJson();
						//顯示
            foreach(var item in Classroom.Students){
                Console.WriteLine("===========================");
                Console.WriteLine("Name：{0}",item.Name);
                Console.WriteLine("StudentNumber：{0}",item.StudentNumber);
                Console.WriteLine("Birthday：{0}",item.Birthday);
                Console.WriteLine("Sex：{0}",item.Sex);
                Console.WriteLine("Effective：{0}",item.Effective);
                Console.WriteLine("===========================");
            }
        }
    }
}
```